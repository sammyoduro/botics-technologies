<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Bootstrap-ecommerce by Vosidiy">

<title>Botics Administrators</title>

<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico">

<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"> </script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js" ></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.9/summernote.js"></script>
<!-- Bootstrap4 files-->
<script src="/javascripts/bootstrap.bundle.min.js" type="text/javascript"></script>
<link href="/stylesheets/bootstrap.css?v=1.0" rel="stylesheet" type="text/css"/>

<!-- Font awesome 5 -->
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<!-- include summernote css/js -->
<link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.9/summernote.css" rel="stylesheet">
<!-- plugin: fancybox  -->
<script src="/plugins/fancybox/fancybox.min.js" type="text/javascript"></script>
<link href="/plugins/fancybox/fancybox.min.css" type="text/css" rel="stylesheet">

<!-- plugin: owl carousel  -->
<link href="/plugins/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
<link href="/plugins/owlcarousel/assets/owl.theme.default.css" rel="stylesheet">
<script src="/plugins/owlcarousel/owl.carousel.min.js"></script>

<!-- custom style -->
<link href="/stylesheets/ui.css?v=1.0" rel="stylesheet" type="text/css"/>
<link href="/stylesheets/responsive.css" rel="stylesheet" media="only screen and (max-width: 1200px)" />
<link href="/stylesheets/adminstyle.css" rel="stylesheet" type="text/css"/>

<!-- custom javascript -->
<script src="/javascripts/adminscript.js" type="text/javascript"></script>

</head>
<body>
<header class="section-header">
  <section class="header-main">
  	<div class="container">
  <div class="row align-items-center">
  	<div class="col-lg-3 col-sm-4">
  	<div class="brand-wrap">
  		<a href="/"><img class="logo" src="../../../../../images/one.png"></a>
  		<!-- <h2 class="logo-text">BOTICS TECHNOLOGIES</h2> -->
  	</div> <!-- brand-wrap.// -->
  	</div>
  	<div class="col-lg-5 col-xl-4 col-sm-12 offset-lg-4">
  		<div class="widgets-wrap float-right">
        <div class="widget-header">
  				<a href="/users/login" data-toggle="dropdown"  data-offset="20,10">
  					<div class="icontext newnotify">
  						<div class="icon-wrap"><i class="icon-sm round border fa fa-envelope-o"></i></div>
  						<div class="text-wrap"></div>
  					</div>
  				</a>
          <div class="dropdown-menu dropdown-menu-right">
            <a class="dropdown-item" href="/areacode97/admin/outofbound/admin/messages">messages notification <span class="m small badge badge-danger">  </span></a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/areacode97/admin/outofbound/admin/proposals">proposals notification <span class="p small badge badge-danger"> </span></a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/areacode97/admin/outofbound/admin/outofstock">out of stock <span class="oos small badge badge-danger">  </span></a>
          </div> <!--  dropdown-menu .// -->
  			</div>

  			<a href="" class="widget-header mr-3">
  				<div class="icontext">
  					<div class="icon-wrap"><i class="icon-sm round border fa fa-shopping-cart"></i></div>
  					<div class="text-wrap">
  						<span class="small badge badge-danger">
              0
              </span>
  					</div>
  				</div>
  			</a>
  			<div class="widget-header">
  				<a href="/users/login" data-toggle="dropdown"  data-offset="20,10">
  					<div class="icontext">
  						<div class="icon-wrap"><i class="icon-sm round border fa fa-user"></i></div>
  						<div class="text-wrap">
  							<small>Welcome</small>
  							<div><%= user.firstname %> <i class="fa fa-caret-down"></i> </div>
  						</div>
  					</div>
  				</a>
          <div class="dropdown-menu dropdown-menu-right">
            <a class="dropdown-item" href="#">Settings</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/areacode97/admin/outofbound/admin/page/logout">Logout</a>
  				</div> <!--  dropdown-menu .// -->
  			</div>  <!-- widget-header .// -->

  		</div> <!-- widgets-wrap.// -->
  	</div> <!-- col.// -->
  </div> <!-- row.// -->
  	</div> <!-- container.// -->
  </section> <!-- header-main .// -->


<nav class="navbar navbar-expand-lg navbar-dark bg-secondary">
  <div class="container">

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_nav" aria-controls="main_nav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="main_nav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/" target="_blank"> LIVE</a>
        </li>
        <li class="nav-item  "><a href="/areacode97/admin/outofbound/admin/proposals" class="nav-link">  PROPOSALS </a></li>
        <li class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">  ADMINISTRATORS </a>
            <ul class="dropdown-menu ">
      				<li><a class="dropdown-item" href="/areacode97/admin/outofbound/admin/adminsregistration">Register new admin</a></li>

            </ul>
        </li>
        <li class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">  ITEMS </a>
            <ul class="dropdown-menu ">
      				<li><a class="dropdown-item" href="/areacode97/admin/outofbound/admin/items">Items list</a></li>
            </ul>
        </li>
        <li class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">  TUTORIALS </a>
            <ul class="dropdown-menu ">
      				<li><a class="dropdown-item" href="/areacode97/admin/outofbound/admin/tutorials/new">New tutorial</a></li>
            </ul>
        </li>
        <li class="nav-item"><a href="/areacode97/admin/outofbound/admin/featured_vid" class="nav-link">  FEATURED VIDEOS </a></li>
        <li class="nav-item"><a href="/areacode97/admin/outofbound/admin/frequently_searched" class="nav-link">  FREQUENTLY SEARCHED </a></li>
        <li class="nav-item"><a href="/areacode97/admin/outofbound/admin/orders" class="nav-link">  ORDERS </a></li>
        <li class="nav-item active"><a href="/areacode97/admin/outofbound/admin/outofstock" class="nav-link">  OUT OF STOCK </a></li>
      </ul>
    </div> <!-- collapse .// -->
  </div> <!-- container .// -->
</nav>
</header> <!-- section-header.// -->
<!-- modal -->
  <div class="modal fade bd-example-modal-lg" id="update" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <h5 class="modal-title" id="exampleModalLabel">Update</h5> -->
        <div class="media">
          <img class="mr-3" id="updateimg" width="64" height="64">
          <input type="hidden" id="updatehid">
        </div>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="itemtitle" class="col-form-label">Title:</label>
            <input type="text" class="form-control" id="itemtitle">
          </div>
          <div class="row">
            <div class="col">
              <div class="form-group">
                <label for="itemprice" class="col-form-label">Price GHc:</label>
                <input type="text" class="form-control" id="itemprice">
              </div>
            </div>
            <div class="col">
              <div class="form-group">
                <label for="itemQuantity" class="col-form-label">Quantities:</label>
                <input type="text" class="form-control" id="itemQuantity">
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="itemdescription" class="col-form-label">Description:</label>
            <textarea class="form-control" id="itemdescription"></textarea>
          </div>
          <div class="form-group">
            <label for="detailtemdescription" class="col-form-label">Detailed Description:</label>
            <textarea class="form-control" id="detailtemdescription" name="detailtemdescription"></textarea>
          </div>
          <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" onclick="UpdateSubmit()" data-dismiss="modal">Save update</button>
      </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!--/modal  -->
<section class="section-content bg padding-y-sm">
<div class="container">
<nav class="mb-3">
<ol class="breadcrumb">
    <li class="breadcrumb-item " aria-current="/proposals">Items out of STOCK</li>
</ol>
</nav>


</div>
</section>
<div class="row">
<div class="col-xl-12 col-md-12 col-sm-12">
      <main class="card">
        <div class="card-body">
          <div class="row">

    <div class="col-lg-12" style="margin-bottom:10px">
      <div class="col-lg-12 card">
        <div class="col-md-12" style="margin-bottom:10px;padding-top:50px;padding-left:0px;">
              <div class="scrollbar scrollbar-primary">
                <div class="force-overflow ">
                  <table class="table table-inbox table-hover">
                    <tbody>
                      <% if(components){ %>
                      <% for(var i=0; i < components.length; i++){ %>
                  <tr>
                    <td class="view-message "> <img class="mr-3" src="../../../../images/<%= components[i].imagePath_one %>" alt="component image" width="64" height="64"></td>
                      <td class="view-message"> <small><%= components[i].title %></small> </td>
                      <td class="view-message"><small><b>Qty: ( <%= components[i].quantities %> pieces )</b></small></td>
                      <td class="view-message"> <small><b>Price GHc: ( <%= components[i].price %> )</b></small> </td>
                      <td class="view-message">
                        <button type="button" id="<%=components[i].id %>_update" class="btn btn-sm  btn-info update-item" data-toggle="modal" data-target="#update">Update</button>
                      </td>
                  </tr>
                  <%  }} %>
              </tbody>
                </table>
                </div>
              </div>

            </div>
          </div>
      </div>
    </div>
        </div>
      </main>
    </div>
  </div>
  <script type="text/javascript">
  var components = <%-JSON.stringify(components) %>

         $(".update-item").on("click",function($ev){
           var parse_id = $(this).attr('id');
           var id = parse_id.split('_')[0];
           components.forEach(function (items) {
             if(items._id == id){
               $('#updatehid').val(items._id);
               $('#itemtitle').val(items.title);
               $('#itemprice').val(items.price);
               $('#itemQuantity').val(items.quantities);
               $('#itemdescription').val(items.description);
               $('#detailtemdescription').val(items.detailed_description);
               $('#updateimg').attr('src','../../../../images/'+items.imagePath_one);

             }

           });
         });

         function UpdateSubmit() {
              var id              = $('#updatehid').val();
              var itemtitle       = $('#itemtitle').val();
              var itemprice       = $('#itemprice').val();
              var itemQuantity    = $('#itemQuantity').val();
              var itemdescription = $('#itemdescription').val();
              var detailtemdescription = $('#detailtemdescription').val();
              var data = {id:id,itemtitle:itemtitle,itemprice:itemprice,itemQuantity:itemQuantity,itemdescription:itemdescription,detailtemdescription:detailtemdescription}
                // make ajax call /areacode97/admin/outofbound/admin/items
                $.ajax({
                  type        : 'post',
                  data        : data,
                  dataType    : 'json',
                  url         : '/areacode97/admin/outofbound/admin/ulter',
                  success     : function(data){
                    console.log(data);
                    if(data.ok == 1){
                    $(".table-inbox").load(location.href+" .table-inbox>*","");

                    }
                  }
                });
  }
  </script>
